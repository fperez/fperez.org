

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Code reviews: the lab meeting for code &#8212; Fernando Pérez</title>
    <link rel="stylesheet" href="../_static/fperez.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Decorators and execution context" href="decorators.html" />
    <link rel="prev" title="Python for scientific computing: a personal list of “warts”" href="warts.html" /> 
  </head>
  <body>
<div class="header">
 <a href="../index.html">
  <img src="../_static/top_mountains_clouds.jpg"
	       alt="Fernando Pérez"></a>
</div>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="decorators.html" title="Decorators and execution context"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="warts.html" title="Python for scientific computing: a personal list of “warts”"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Python for scientific computing</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h4> Site Navigation </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="../research/index.html">Research</a></li>
    <li><a class="reference external"
	href="../talks/index.html">Talks</a></li>
    <li><a class="reference external"
	href="../events/index.html">Events</a></li>
    <li><a class="reference external"
	href="../teaching/index.html">Teaching</a></li>
    <li><a class="reference external"
	href="index.html">Py4Science</a></li>
    <li><a class="reference external"
	href="../code/index.html">Software</a></li>
    <li><a class="reference external"
	href="../personal.html">Personal</a></li>
  </ul>
<h4> External links </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://blog.fperez.org">Blog</a></li>
    <li><a class="reference external"
	href="http://gplus.to/fperez">Google+</a></li>
    <li><a class="reference external"
	href="http://twitter.com/fperez_org">@fperez_org</a></li>
    <li><a class="reference external"
	href="http://ipython.org">IPython</a></li>
    <li><a class="reference external"
	href="http://numfocus.org">NumFOCUS</a></li>
    <li><a class="reference external"
	href="http://numfocus.org/johnhunter">J.D. Hunter Memorial</a></li>
  </ul>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Code reviews: the lab meeting for code</a><ul>
<li><a class="reference internal" href="#presentation-guidelines">Presentation guidelines</a></li>
<li><a class="reference internal" href="#suggestions-for-the-meeting-leader">Suggestions for the meeting leader</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="warts.html"
                        title="previous chapter">Python for scientific computing: a personal list of “warts”</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="decorators.html"
                        title="next chapter">Decorators and execution context</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/py4science/code_reviews.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="11" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>



<hr>

<div class="header">
     
     
     <a href="http://dst.lbl.gov">
     <img src="../_static/lbl_logo.png", width=140px
     alt="Data Science Division, LBNL"></a>

     <a href="http://bids.berkeley.edu">
       <img src="../_static/bids_logo.png", width=140px
       	alt="Berkeley Institute for Data Science (BIDS)"></a>
</div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="code-reviews-the-lab-meeting-for-code">
<span id="code-reviews"></span><h1>Code reviews: the lab meeting for code<a class="headerlink" href="#code-reviews-the-lab-meeting-for-code" title="Permalink to this headline">¶</a></h1>
<p>While working as a postdoc at CU Boulder I met <a class="reference external" href="https://knightlab.ucsd.edu">Rob Knight</a>, a professor in
biochemistry and molecular biology who had a strict discipline of doing, in
addition to his group lab meetings, regular code reviews with all of his lab
members.  Rob’s group is extremely active and productive, and I recently asked
him about his continued use of this process.  He does still hold them and
explained that he feels they are a key element of his lab’s success; he also
provided some very useful feedback based on which I put these notes together.</p>
<p>With Rob’s permission, I am posting here a set of guidelines that come from his
reply to my questions, which I intend to use in my own work here at UC
Berkeley.  I have made minor edits to his notes, but the full credit of these
ideas, fine-tuned and validated over more than 7 years of practice, goes to
Rob, to whom I’m very thankful for allowing me to reuse them here.  I do claim
full credit on any blunders I may have added in editing.</p>
<p>These meetings bridge research and practical implementation questions:
sometimes the discussion may focus on fundamental algorithmic ideas or the
approach to a problem, other times the problems will be documentation, testing
or implementation clarity.  But I feel that as our research sits on an
increasingly large and complex pile of software tools, many of them written
in-house, we must treat these tools with the attention and expectations of
rigor that we have for other parts of the research work.  And the only way to
do that is to scrutinize the code with the same peer-review process that we use
for results within a lab before we put them out in a paper sent for publication
(where they do get further reviewed).</p>
<div class="section" id="presentation-guidelines">
<h2>Presentation guidelines<a class="headerlink" href="#presentation-guidelines" title="Permalink to this headline">¶</a></h2>
<p>The most difficult part of writing code is always to make it understandable to
other people, including yourself a few months down the track.  There’s
certainly no shame in finding out that your code wasn’t as easy to understand
or use as you’d hoped, so don’t take it personally when it happens (which it
always does, at least in my experience), but treat it as an opportunity to
improve.</p>
<p>Here’s some general guidelines for making your code review go smoothly:</p>
<ul class="simple">
<li>Make sure the motivation for your code is clear. Someone who isn’t intimately
involved with your project should understand from the module documentation
and the comments what you are trying to do, what approach you’re taking, and
why they should expect it to work.</li>
<li>Take some time to prepare a presentation about your code that will answer the
above questions even for someone who hasn’t read the code. You’re more likely
to get useful feedback, rather than nitpicking about syntax, if the audience
can see the big picture.</li>
<li>Get the code sent out at least a few days beforehand along with some
background about what to look at (if large), whether suggestions should be
about architecture/implementation/algorithm/requirements, etc.  Make sure
everyone has enough time to read the code beforehand, and don’t send a series
of updated versions immediately before code review.</li>
<li>Don’t try to present too much. 200 lines is an absolute maximum – 50 is
usually more reasonable.</li>
<li>Include examples, either as unit tests or standalone in the module’s
<code class="docutils literal"><span class="pre">__main__</span></code> block. It can often be a lot easier to see an example working
than to figure out the algorithm from the code.</li>
<li>Ask yourself, before sending the code out, if it could be simpler. Break
complex routines down into smaller ones, consider using built-in functions
and data types instead of custom ones, see if you can separate complex logic
into a dispatch routine and simple individual functions, etc. This also
generally helps you make the code more testable.</li>
<li>Follow the coding guidelines and Python idioms applicable to your group.  At
UC Berkeley I am following for all of my projects the Python style guide
encoded in <a class="reference external" href="http://www.python.org/dev/peps/pep-0008">PEP 8</a>, supplemented where necessary (in particular with regards
to docstring standards) with the <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">Numpy coding style guidelines</a>.</li>
<li>Take advantage of existing mature code in your group, the Python cookbook,
and other sources of existing code to get an idea of how to do things. Many
problems have already been solved for you. It’s always better to reuse
well-tested code (if it does what you want) than to reinvent the wheel.</li>
<li>It’s OK to present code that doesn’t work yet, or that you think needs
improvement, as long as you signal this fact very clearly in your email
sending out the code. If there are specific areas you want people to focus
on, don’t keep it a secret – it’s a waste of time to give detailed feedback
on code that is about to be scrapped.</li>
</ul>
</div>
<div class="section" id="suggestions-for-the-meeting-leader">
<h2>Suggestions for the meeting leader<a class="headerlink" href="#suggestions-for-the-meeting-leader" title="Permalink to this headline">¶</a></h2>
<p>Rob also provided the following tips for the person leading the meetings, which
I think are very valid and complement the general guidelines above for the
entire group.  These are mostly about setting the right tone for the
discussion, so that a productive culture develops where the process can be both
rigorous and friendly.</p>
<ul class="simple">
<li>Keep it a safe environment, i.e. make sure chastising is relatively gentle
even when deserved (but do point out when code doesn’t meet the required
standard – frame it as a learning experience though).</li>
<li>Make sure there’s a core of vocal participants so it isn’t always you.</li>
<li>Make it clear when you’re presenting yourself that your code isn’t perfect,
point out some of those imperfections yourself if audience is slow to do so,
<em>do</em> present yourself.</li>
<li>Patiently explain when things are not wrong but just stylistic differences
(but make it clear that <em>some</em> styles are bad, often helpful to e.g. ask
people to guess what a function returns from its name).</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="decorators.html" title="Decorators and execution context"
             >next</a></li>
        <li class="right" >
          <a href="warts.html" title="Python for scientific computing: a personal list of “warts”"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Python for scientific computing</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010, Fernando Pérez.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>